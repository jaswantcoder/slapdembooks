(this.webpackJsonpSlapDemBooks=this.webpackJsonpSlapDemBooks||[]).push([[0],{31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),o=a.n(c);a(36),a(37),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(3),s=a(9),l=a(8),u=a(2),m=(a(38),a(39),function(e){return r.a.createElement("div",{className:"BackgroundContainer"},e.children)}),d=(a(40),function(e){return r.a.createElement("div",{class:"CheckedInStatus"},e.user.checkedin.active?r.a.createElement(r.a.Fragment,null,"You're checked in as studying ",e.user.checkedin.subject," at ",e.user.checkedin.location,r.a.createElement("div",{class:"ActionRow"},r.a.createElement("a",{class:"btn btn-primary",onClick:e.handleCheckOut},"Check Out"),r.a.createElement(i.b,{to:"/checkin"},r.a.createElement("div",{class:"btn btn-text"},"Edit Status")))):r.a.createElement(r.a.Fragment,null,"Check in to let your friends know you are studying.",r.a.createElement("div",{class:"ActionRow"},r.a.createElement(i.b,{to:"/checkin"},r.a.createElement("div",{class:"btn btn-primary"},"Check In")))))}),f=(a(45),function(e){return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"left"},r.a.createElement("h1",null,e.title||"Slap dem Books")),r.a.createElement("div",{className:"right"},"close"===e.action?r.a.createElement(i.b,{to:"/"},r.a.createElement("i",{class:"fas fa-times"})):r.a.createElement(i.b,{to:"/account"},r.a.createElement("i",{class:"fas fa-ellipsis-v"}))))}),b=(a(46),function(e){return r.a.createElement("div",{className:"ContainerPanel"},e.children)}),p=(a(47),function(e){return r.a.createElement("div",{className:"TabBar"},e.children)}),h=function(e){return r.a.createElement("div",{class:"TabItem"+(e.active?" active":""),onClick:e.onClick},e.children)},E=function(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:"TabbedContent"},r.a.createElement(p,null,e.tabs.map((function(e,t){return r.a.createElement(h,{key:t,active:t==c,onClick:function(){o(t)}},e)}))),e.tabContents[c])},g=(a(48),function(e){var t=e.contacts.length.toString()+" "+e.noun[1===e.contacts.length?0:1]+" studying at "+e.location;return r.a.createElement("div",{className:"StudyBox"},r.a.createElement("div",{class:"intro-label"},t),r.a.createElement("div",{class:"ContactList"},e.contacts.map((function(e,t){return r.a.createElement("div",{class:"Contact",key:t},r.a.createElement("img",{class:"pic",src:e.photoURL}),e.displayName," is studying ",e.checkedin.subject)}))))}),v=r.a.createContext(null),O=a(13),j=a(14),y=a(11),k=a.n(y),N=(a(49),a(51),{apiKey:"AIzaSyDnDWpmq5hezmNEbrLmD--wytNx_NE-Abk",authDomain:"slapdembooks.firebaseapp.com",databaseURL:"https://slapdembooks.firebaseio.com",projectId:"slapdembooks",storageBucket:"slapdembooks.appspot.com",messagingSenderId:"526030900055",appId:"1:526030900055:web:614ec25daf06ea7b31cc12",measurementId:"G-M9DLQVS5FT"}),P=function(){function e(){var t=this;Object(O.a)(this,e),this.doSignInWithGoogle=function(){return t.auth.signInWithRedirect(t.googleProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doSetupUser=function(e){return new Promise((function(a,n){var r=t.auth.currentUser;t.db.collection("users").doc(e).set({uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,checkedin:{active:!1,location:"",subject:"",message:""},friends:[]}).then((function(){return a()})).catch((function(){return n()}))}))},k.a.initializeApp(N),this.auth=k.a.auth(),this.db=k.a.firestore(),this.googleProvider=new k.a.auth.GoogleAuthProvider}return Object(j.a)(e,[{key:"doMakeFriends",value:function(e,t){this.db.collection("users").doc(e).update({friends:k.a.firestore.FieldValue.arrayUnion(t)}),this.db.collection("users").doc(t).update({friends:k.a.firestore.FieldValue.arrayUnion(e)})}}]),e}();function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(null),l=Object(u.a)(i,2),p=l[0],h=l[1],v=Object(n.useState)({}),O=Object(u.a)(v,2),j=O[0],y=O[1];Object(n.useEffect)((function(){e.firebase.auth.onAuthStateChanged((function(t){null!==t?e.firebase.db.collection("users").where("uid","==",t.uid).get().then((function(t){var a=t.docs[0].data();h(w({username:t.docs[0].id},a));var n=a.friends;e.firebase.db.collection("users").get().then((function(e){var t=[];e.forEach((function(e){-1!==n.indexOf(e.id)&&t.push(w({username:e.id},e.data()))})),t=t.filter((function(e){return e.checkedin.active}));var a={};t.forEach((function(e){void 0===a[e.checkedin.location]?a[e.checkedin.location]=[e]:a[e.checkedin.location].push(e)})),y(a)}))})).catch((function(e){return alert("Error "+e)})):(h(t),o(!0))}))}),[]);var k=Object(n.useState)(!1),N=Object(u.a)(k,2),P=N[0];N[1];return P?r.a.createElement(s.a,{to:"/"}):c?r.a.createElement(s.a,{to:"/login"}):p?r.a.createElement("div",{className:"Page Home"},r.a.createElement(m,null,r.a.createElement(f,null),r.a.createElement(d,{user:p,handleCheckOut:function(){e.firebase.db.collection("users").doc(p.username).update({checkedin:{active:!1,location:"",subject:"",message:""}}).then((function(){return window.location.reload()}))}}),r.a.createElement(b,null,r.a.createElement(E,{tabs:["Friends","Courses"],tabContents:[r.a.createElement("div",null,Object.keys(j).map((function(e,t){return r.a.createElement(g,{key:t,location:e,contacts:j[e],noun:["friend is","friends are"]})}))),r.a.createElement("div",null,"Find other people studying the same course as you",Object.keys(j).map((function(e,t){return r.a.createElement(g,{key:t,location:e,contacts:j[e],noun:["person is","friends are"]})})))]})))):r.a.createElement(r.a.Fragment,null)},A=function(e){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(S,{firebase:e})}))},F=(a(55),function(e){var t=Object(n.useState)("loading"),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){e.firebase.auth.onAuthStateChanged((function(t){t?e.firebase.db.collection("users").where("uid","==",t.uid).get().then((function(e){console.log(e),e.docs.length>0?o("redirect to home"):o("redirect to setup")})).catch((function(e){return alert("Error "+e)})):o("login")}))}),[]),"redirect to setup"===c?r.a.createElement(s.a,{to:"/setup"}):"redirect to home"===c?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"Page Login"},r.a.createElement(m,null,r.a.createElement("div",{class:"aligner"},r.a.createElement("div",{className:"logoPlaceholder"}),"login"===c&&r.a.createElement("div",{className:"btn-login googleLogin",onClick:e.firebase.doSignInWithGoogle},"Login with Google"))))}),x=function(e){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(F,{firebase:e})}))},D=(a(56),function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){console.log(e.firebase),e.firebase.doSignOut().then((function(){return o(!0)}))}),[]),c?r.a.createElement(s.a,{to:"/login"}):r.a.createElement("div",{className:"Page Logout"},r.a.createElement(m,null))}),L=function(e){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(D,{firebase:e})}))};a(57);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){e.firebase.auth.onAuthStateChanged((function(t){t?e.firebase.db.collection("users").where("uid","==",t.uid).get().then((function(e){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({username:e.docs[0].id},e.docs[0].data()))})).catch((function(e){return alert("Error "+e)})):o(t)}))}),[]),r.a.createElement("div",{className:"Page Account"},r.a.createElement(m,null,r.a.createElement(f,{action:"close"}),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:c.photoURL,className:"pic"}),r.a.createElement("div",{className:"accountName"},c.username),r.a.createElement("div",{className:"options"},r.a.createElement(i.b,{to:"/friends"},r.a.createElement("i",{class:"fas fa-user-plus"}),"\xa0 Add Friends"),r.a.createElement(i.b,{to:"/profile"},r.a.createElement("i",{class:"fas fa-user-circle"}),"\xa0 View Profile"),r.a.createElement(i.b,{to:"/logout"},r.a.createElement("i",{class:"fas fa-sign-out-alt"}),"\xa0 Logout")))))},T=function(e){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(H,{firebase:e})}))},M=(a(58),function(e){return r.a.createElement("div",{className:"Page AddFriends"},r.a.createElement(f,{action:"close"}),r.a.createElement("div",{className:"add-form"},"Friend's username",r.a.createElement("input",{type:"text"}),r.a.createElement("button",null,"Add friend")),r.a.createElement("div",{className:"FriendList"},"Your Friend's",r.a.createElement("ul",null,r.a.createElement("li",null,"Person #1"),r.a.createElement("li",null,"Person #2"))))}),U=(a(59),function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),l=Object(u.a)(i,2),d=l[0],f=l[1];return d?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"Page SetupAccount"},r.a.createElement(m,null,r.a.createElement("div",{className:"welcome-message"},"Welcome to SlapDemBooks!"),r.a.createElement("div",{className:"input-form"},"Select a username:",r.a.createElement("input",{type:"text",className:"username",value:c,onChange:function(e){return o(e.target.value)}})),r.a.createElement("footer",null,r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement("button",{className:"confirm-btn",onClick:function(){return e.doSetupUser(c).then((function(){return f(!0)}))}},"Confirm \xbb")})))))});a(60);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var B=["MATH223","MATH240","PHIL210","COMP550","COMP551"],W=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],o=a[1],i=function(e){o(e),null!==e&&(p(e.checkedin.location),v(e.checkedin.subject),k(e.checkedin.message))};Object(n.useEffect)((function(){e.firebase.auth.onAuthStateChanged((function(t){t?e.firebase.db.collection("users").where("uid","==",t.uid).get().then((function(e){i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({username:e.docs[0].id},e.docs[0].data()))})).catch((function(e){return alert("Error "+e)})):i(t)}))}),[]);var m=Object(n.useState)(""),d=Object(u.a)(m,2),b=d[0],p=d[1],h=Object(n.useState)(B[0]),E=Object(u.a)(h,2),g=E[0],v=E[1],O=Object(n.useState)(""),j=Object(u.a)(O,2),y=j[0],k=j[1],N=Object(n.useState)(!1),P=Object(u.a)(N,2),C=P[0],w=P[1];return C?r.a.createElement(s.a,{to:"/"}):c?r.a.createElement("div",{className:"Page CheckIn"},r.a.createElement(f,{action:"close",title:"Check In"}),r.a.createElement("div",{className:"field"},"What building are you studying in?",r.a.createElement("input",{type:"text",value:b,onChange:function(e){return p(e.target.value)}})),r.a.createElement("div",{className:"field"},"What subject are you studying?",r.a.createElement("select",{value:g,onChange:function(e){return v(e.target.value)}},B.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("div",{className:"field"},"Public message? (optional)",r.a.createElement("textarea",{value:y,onChange:function(e){return k(e.target.value)}})),r.a.createElement("a",{className:"btn btn-primary",onClick:function(){e.firebase.db.collection("users").doc(c.username).update({checkedin:{active:!0,location:b,subject:g,message:y}}).then((function(){return w(!0)}))}},"Check In")):r.a.createElement(r.a.Fragment,null)},z=function(){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(W,{firebase:e})}))},Y=(a(61),function(e){return r.a.createElement("div",{className:"Page Profile"},r.a.createElement(f,{action:"close"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"center"},r.a.createElement("img",{src:"https://lh3.googleusercontent.com/-bxij4YMT3XY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdUVPzzXHLpEwHq5RjzTY5Ayid6xA/photo.jpg",className:"pic"})),r.a.createElement("div",{className:"accountName"},"Logan Ralston"),r.a.createElement("div",{className:"accountUsername"},"logan-r"),r.a.createElement("div",{className:"defaultFontSize"},r.a.createElement("div",{className:"currentCourses"},r.a.createElement("div",{className:"infoTitle"},r.a.createElement("i",{className:"icon fas fa-clipboard-list"}),"Logan Ralston is currently taking ",r.a.createElement("span",{className:"edit"},"edit")),r.a.createElement("ul",{className:"courseList"},r.a.createElement("li",null,"MATH223"),r.a.createElement("li",null,"PSYC305"),r.a.createElement("li",null,"COMP302"),r.a.createElement("li",null,"COMP303"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"checkInInfo"},r.a.createElement("div",{className:"infoTitle"},"Status: Checked In",r.a.createElement("span",{className:"edit"},"edit")),r.a.createElement("div",{className:"infoTitle"},r.a.createElement("i",{className:"icon fas fa-map-marker-alt"}),"Studying in Bronfman"),r.a.createElement("div",{className:"infoTitle"},r.a.createElement("i",{className:"icon fas fa-book"}),"Focusing on ",r.a.createElement("span",{className:"courseFocus"}," MATH223")),r.a.createElement("p",{className:"description"},"I'm working on Assignment 2 right now. Come join me!")))))}),G=a(22),V=a(21),q=a(16),J=a(23);a(62);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(G.a)(this,Object(V.a)(t).call(this,e))).state={people:[],term:"",user:null,friends:[]},a.searchHandler=a.searchHandler.bind(Object(q.a)(a)),a}return Object(J.a)(t,e),Object(j.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.firebase.auth.onAuthStateChanged((function(t){t?e.props.firebase.db.collection("users").where("uid","==",t.uid).get().then((function(t){var a=t.docs[0].data();e.setState({user:K({username:t.docs[0].id},a),friends:a.friends}),t.docs[0].data(),e.props.firebase.db.collection("users").get().then((function(t){var n=[];t.forEach((function(t){t.id!==e.state.user.username&&n.push(K({username:t.id},t.data()))})),console.log(a.friends),e.setState({people:n})}))})).catch((function(e){return alert("Error "+e)})):e.setState({user:null})}))}},{key:"searchHandler",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.term,n=t.people;return r.a.createElement("div",{className:"Page Friends"},r.a.createElement(f,{title:"Add Friends",action:"close"}),r.a.createElement("div",{class:"searchbar"},r.a.createElement("form",null,r.a.createElement("i",{class:"fas fa-search",id:"searchIcon"}),r.a.createElement("input",{id:"searchInput",type:"text",placeholder:"Search",onChange:this.searchHandler,value:a}))),n.filter(function(e){return function(t){return console.log(t),t.username.toLowerCase().includes(e.toLowerCase())||t.displayName.toLowerCase().includes(e.toLowerCase())||!e}}(a)).map((function(t){return r.a.createElement("div",{key:t.username},r.a.createElement($,{img:t.photoURL,name:t.displayName,username:t.username,alreadyFriended:-1!==e.state.friends.indexOf(t.username),handleAddFriend:function(){e.props.firebase.doMakeFriends(e.state.user.username,t.username),e.setState({friends:e.state.friends+[t.username]})}}))})))}}]),t}(r.a.Component),$=function(e){function t(){return Object(O.a)(this,t),Object(G.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box"},r.a.createElement("img",{src:this.props.img,className:"pic"}),r.a.createElement("div",{className:"person-info"},r.a.createElement("div",{className:"name"},this.props.name),r.a.createElement("div",{className:"username"},this.props.username)),this.props.alreadyFriended?r.a.createElement("div",{class:"add-friend-btn"},r.a.createElement("i",{class:"fas fa-check"})):r.a.createElement("div",{class:"add-friend-btn",onClick:this.props.handleAddFriend},r.a.createElement("i",{class:"fas fa-user-plus"})))}}]),t}(r.a.Component),_=function(e){return r.a.createElement(v.Consumer,null,(function(e){return r.a.createElement(Q,{firebase:e})}))};o.a.render(r.a.createElement(v.Provider,{value:new P},r.a.createElement(i.a,null,r.a.createElement(s.b,{exact:!0,path:"/",component:A}),r.a.createElement(s.b,{exact:!0,path:"/login",component:x}),r.a.createElement(s.b,{exact:!0,path:"/logout",component:L}),r.a.createElement(s.b,{exact:!0,path:"/setup",component:U}),r.a.createElement(s.b,{exact:!0,path:"/checkin",component:z}),r.a.createElement(s.b,{exact:!0,path:"/account",component:T}),r.a.createElement(s.b,{exact:!0,path:"/addfriends",component:M}),r.a.createElement(s.b,{exact:!0,path:"/profile",component:Y}),r.a.createElement(s.b,{exact:!0,path:"/friends",component:_}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.eb405e00.chunk.js.map